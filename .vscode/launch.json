{
  "version": "0.2.0",
  "configurations": [
    {
      "type": "node",
      "request": "launch",
      "name": "Debug GitHub Action - Package",
      "program": "${workspaceFolder}/packages/github-action/src/main.ts",
      "preLaunchTask": "npm: build:v6",
      "outFiles": ["${workspaceFolder}/packages/github-action/dist/**/*.js"],
      "sourceMaps": true,
      "cwd": "${workspaceFolder}",
      "env": {
        "INPUT_OPERATION": "package",
        "INPUT_ROOT-FOLDER": "${workspaceFolder}/packages/core/src/__tests__/integration/fixtures/test-extension",
        "INPUT_OUTPUT-PATH": "${workspaceFolder}/dist",
        "INPUT_TFX-VERSION": "embedded",
        "RUNNER_TEMP": "${workspaceFolder}/.tmp",
        "RUNNER_TOOL_CACHE": "${workspaceFolder}/.cache"
      },
      "console": "integratedTerminal"
    },
    {
      "type": "node",
      "request": "launch",
      "name": "Debug GitHub Action - Publish",
      "program": "${workspaceFolder}/packages/github-action/src/main.ts",
      "preLaunchTask": "npm: build:v6",
      "outFiles": ["${workspaceFolder}/packages/github-action/dist/**/*.js"],
      "sourceMaps": true,
      "cwd": "${workspaceFolder}",
      "env": {
        "INPUT_OPERATION": "publish",
        "INPUT_AUTH-TYPE": "pat",
        "INPUT_TOKEN": "${env:MARKETPLACE_TOKEN}",
        "INPUT_PUBLISH-SOURCE": "manifest",
        "INPUT_ROOT-FOLDER": "${workspaceFolder}/packages/core/src/__tests__/integration/fixtures/test-extension",
        "INPUT_PUBLISHER-ID": "your-publisher",
        "INPUT_EXTENSION-ID": "your-extension",
        "INPUT_TFX-VERSION": "embedded",
        "RUNNER_TEMP": "${workspaceFolder}/.tmp",
        "RUNNER_TOOL_CACHE": "${workspaceFolder}/.cache"
      },
      "console": "integratedTerminal"
    },
    {
      "type": "node",
      "request": "launch",
      "name": "Debug GitHub Action - Show",
      "program": "${workspaceFolder}/packages/github-action/src/main.ts",
      "preLaunchTask": "npm: build:v6",
      "outFiles": ["${workspaceFolder}/packages/github-action/dist/**/*.js"],
      "sourceMaps": true,
      "cwd": "${workspaceFolder}",
      "env": {
        "INPUT_OPERATION": "show",
        "INPUT_AUTH-TYPE": "pat",
        "INPUT_TOKEN": "${env:MARKETPLACE_TOKEN}",
        "INPUT_PUBLISHER-ID": "your-publisher",
        "INPUT_EXTENSION-ID": "your-extension",
        "INPUT_TFX-VERSION": "embedded",
        "RUNNER_TEMP": "${workspaceFolder}/.tmp",
        "RUNNER_TOOL_CACHE": "${workspaceFolder}/.cache"
      },
      "console": "integratedTerminal"
    },
    {
      "type": "node",
      "request": "launch",
      "name": "Debug Azure Pipelines Task - Package",
      "program": "${workspaceFolder}/packages/azdo-task/src/main.ts",
      "preLaunchTask": "npm: build:v6",
      "outFiles": ["${workspaceFolder}/packages/azdo-task/dist/**/*.js"],
      "sourceMaps": true,
      "cwd": "${workspaceFolder}",
      "env": {
        "INPUT_OPERATION": "package",
        "INPUT_ROOTFOLDER": "${workspaceFolder}/packages/core/src/__tests__/integration/fixtures/test-extension",
        "INPUT_OUTPUTPATH": "${workspaceFolder}/dist",
        "INPUT_TFXVERSION": "embedded",
        "AGENT_TEMPDIRECTORY": "${workspaceFolder}/.tmp",
        "AGENT_TOOLSDIRECTORY": "${workspaceFolder}/.cache"
      },
      "console": "integratedTerminal"
    },
    {
      "type": "node",
      "request": "launch",
      "name": "Debug Azure Pipelines Task - Publish (PAT)",
      "program": "${workspaceFolder}/packages/azdo-task/src/main.ts",
      "preLaunchTask": "npm: build:v6",
      "outFiles": ["${workspaceFolder}/packages/azdo-task/dist/**/*.js"],
      "sourceMaps": true,
      "cwd": "${workspaceFolder}",
      "env": {
        "INPUT_OPERATION": "publish",
        "INPUT_CONNECTIONTYPE": "connectedService:VsTeam",
        "INPUT_CONNECTIONNAME": "MarketplaceConnection",
        "INPUT_PUBLISHSOURCE": "manifest",
        "INPUT_ROOTFOLDER": "${workspaceFolder}/packages/core/src/__tests__/integration/fixtures/test-extension",
        "INPUT_PUBLISHERID": "your-publisher",
        "INPUT_EXTENSIONID": "your-extension",
        "INPUT_TFXVERSION": "embedded",
        "AGENT_TEMPDIRECTORY": "${workspaceFolder}/.tmp",
        "AGENT_TOOLSDIRECTORY": "${workspaceFolder}/.cache",
        "ENDPOINT_URL_MarketplaceConnection": "https://marketplace.visualstudio.com",
        "ENDPOINT_AUTH_PARAMETER_MarketplaceConnection_APITOKEN": "${env:MARKETPLACE_TOKEN}",
        "ENDPOINT_AUTH_SCHEME_MarketplaceConnection": "Token"
      },
      "console": "integratedTerminal"
    },
    {
      "type": "node",
      "request": "launch",
      "name": "Debug Azure Pipelines Task - Show",
      "program": "${workspaceFolder}/packages/azdo-task/src/main.ts",
      "preLaunchTask": "npm: build:v6",
      "outFiles": ["${workspaceFolder}/packages/azdo-task/dist/**/*.js"],
      "sourceMaps": true,
      "cwd": "${workspaceFolder}",
      "env": {
        "INPUT_OPERATION": "show",
        "INPUT_CONNECTIONTYPE": "connectedService:VsTeam",
        "INPUT_CONNECTIONNAME": "MarketplaceConnection",
        "INPUT_PUBLISHERID": "your-publisher",
        "INPUT_EXTENSIONID": "your-extension",
        "INPUT_TFXVERSION": "embedded",
        "AGENT_TEMPDIRECTORY": "${workspaceFolder}/.tmp",
        "AGENT_TOOLSDIRECTORY": "${workspaceFolder}/.cache",
        "ENDPOINT_URL_MarketplaceConnection": "https://marketplace.visualstudio.com",
        "ENDPOINT_AUTH_PARAMETER_MarketplaceConnection_APITOKEN": "${env:MARKETPLACE_TOKEN}",
        "ENDPOINT_AUTH_SCHEME_MarketplaceConnection": "Token"
      },
      "console": "integratedTerminal"
    },
    {
      "type": "node",
      "request": "launch",
      "name": "Debug Tests",
      "program": "${workspaceFolder}/node_modules/.bin/jest",
      "args": ["--runInBand", "--no-coverage", "--testNamePattern", "${input:testNamePattern}"],
      "console": "integratedTerminal",
      "internalConsoleOptions": "neverOpen",
      "disableOptimisticBPs": true,
      "env": {
        "NODE_OPTIONS": "--experimental-vm-modules"
      }
    }
  ],
  "inputs": [
    {
      "id": "testNamePattern",
      "type": "promptString",
      "description": "Test name pattern (optional)",
      "default": ""
    }
  ]
}
