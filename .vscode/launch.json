{
  "version": "0.2.0",
  "configurations": [
    {
      "type": "node",
      "request": "launch",
      "name": "Debug GitHub Action - Package",
      "program": "${workspaceFolder}/packages/github-action/src/main.ts",
      "preLaunchTask": "npm: build",
      "outFiles": ["${workspaceFolder}/packages/github-action/dist/**/*.js"],
      "sourceMaps": true,
      "cwd": "${workspaceFolder}",
      "env": {
        "INPUT_OPERATION": "package",
        "INPUT_ROOT-FOLDER": "${workspaceFolder}/packages/core/src/__tests__/integration/fixtures/test-extension",
        "INPUT_OUTPUT-PATH": "${workspaceFolder}/dist",
        "INPUT_TFX-VERSION": "embedded",
        "RUNNER_TEMP": "${workspaceFolder}/.tmp",
        "RUNNER_TOOL_CACHE": "${workspaceFolder}/.cache",
        "GITHUB_WORKSPACE": "${workspaceFolder}",
        "GITHUB_ACTIONS": "true",
        "GITHUB_WORKFLOW": "Debug GitHub Action",
        "GITHUB_RUN_ID": "1",
        "GITHUB_RUN_NUMBER": "1",
        "GITHUB_JOB": "debug",
        "GITHUB_ACTION": "debug-action",
        "GITHUB_ACTOR": "developer",
        "GITHUB_REPOSITORY": "owner/repo",
        "GITHUB_EVENT_NAME": "workflow_dispatch",
        "GITHUB_SHA": "0000000000000000000000000000000000000000",
        "GITHUB_REF": "refs/heads/main",
        "GITHUB_REF_NAME": "main",
        "GITHUB_REF_TYPE": "branch"
      },
      "console": "integratedTerminal"
    },
    {
      "type": "node",
      "request": "launch",
      "name": "Debug GitHub Action - Publish",
      "program": "${workspaceFolder}/packages/github-action/src/main.ts",
      "preLaunchTask": "npm: build",
      "outFiles": ["${workspaceFolder}/packages/github-action/dist/**/*.js"],
      "sourceMaps": true,
      "cwd": "${workspaceFolder}",
      "env": {
        "INPUT_OPERATION": "publish",
        "INPUT_AUTH-TYPE": "pat",
        "INPUT_TOKEN": "${env:MARKETPLACE_TOKEN}",
        "INPUT_PUBLISH-SOURCE": "manifest",
        "INPUT_ROOT-FOLDER": "${workspaceFolder}/packages/core/src/__tests__/integration/fixtures/test-extension",
        "INPUT_PUBLISHER-ID": "your-publisher",
        "INPUT_EXTENSION-ID": "your-extension",
        "INPUT_TFX-VERSION": "embedded",
        "RUNNER_TEMP": "${workspaceFolder}/.tmp",
        "RUNNER_TOOL_CACHE": "${workspaceFolder}/.cache",
        "GITHUB_WORKSPACE": "${workspaceFolder}",
        "GITHUB_ACTIONS": "true",
        "GITHUB_WORKFLOW": "Debug GitHub Action",
        "GITHUB_RUN_ID": "1",
        "GITHUB_RUN_NUMBER": "1",
        "GITHUB_JOB": "debug",
        "GITHUB_ACTION": "debug-action",
        "GITHUB_ACTOR": "developer",
        "GITHUB_REPOSITORY": "owner/repo",
        "GITHUB_EVENT_NAME": "workflow_dispatch",
        "GITHUB_SHA": "0000000000000000000000000000000000000000",
        "GITHUB_REF": "refs/heads/main",
        "GITHUB_REF_NAME": "main",
        "GITHUB_REF_TYPE": "branch"
      },
      "console": "integratedTerminal"
    },
    {
      "type": "node",
      "request": "launch",
      "name": "Debug GitHub Action - Show",
      "program": "${workspaceFolder}/packages/github-action/src/main.ts",
      "preLaunchTask": "npm: build",
      "outFiles": ["${workspaceFolder}/packages/github-action/dist/**/*.js"],
      "sourceMaps": true,
      "cwd": "${workspaceFolder}",
      "env": {
        "INPUT_OPERATION": "show",
        "INPUT_AUTH-TYPE": "pat",
        "INPUT_TOKEN": "${env:MARKETPLACE_TOKEN}",
        "INPUT_PUBLISHER-ID": "your-publisher",
        "INPUT_EXTENSION-ID": "your-extension",
        "INPUT_TFX-VERSION": "embedded",
        "RUNNER_TEMP": "${workspaceFolder}/.tmp",
        "RUNNER_TOOL_CACHE": "${workspaceFolder}/.cache",
        "GITHUB_WORKSPACE": "${workspaceFolder}",
        "GITHUB_ACTIONS": "true",
        "GITHUB_WORKFLOW": "Debug GitHub Action",
        "GITHUB_RUN_ID": "1",
        "GITHUB_RUN_NUMBER": "1",
        "GITHUB_JOB": "debug",
        "GITHUB_ACTION": "debug-action",
        "GITHUB_ACTOR": "developer",
        "GITHUB_REPOSITORY": "owner/repo",
        "GITHUB_EVENT_NAME": "workflow_dispatch",
        "GITHUB_SHA": "0000000000000000000000000000000000000000",
        "GITHUB_REF": "refs/heads/main",
        "GITHUB_REF_NAME": "main",
        "GITHUB_REF_TYPE": "branch"
      },
      "console": "integratedTerminal"
    },
    {
      "type": "node",
      "request": "launch",
      "name": "Debug Azure Pipelines Task - Package",
      "program": "${workspaceFolder}/packages/azdo-task/src/main.ts",
      "preLaunchTask": "npm: build",
      "outFiles": ["${workspaceFolder}/packages/azdo-task/dist/**/*.js"],
      "sourceMaps": true,
      "cwd": "${workspaceFolder}",
      "env": {
        "INPUT_OPERATION": "package",
        "INPUT_ROOTFOLDER": "${workspaceFolder}/packages/core/src/__tests__/integration/fixtures/test-extension",
        "INPUT_OUTPUTPATH": "${workspaceFolder}/dist",
        "INPUT_TFXVERSION": "embedded",
        "AGENT_TEMPDIRECTORY": "${workspaceFolder}/.tmp",
        "AGENT_TOOLSDIRECTORY": "${workspaceFolder}/.cache",
        "AGENT_WORKFOLDER": "${workspaceFolder}/.work",
        "AGENT_VERSION": "3.0.0",
        "AGENT_JOBSTATUS": "Succeeded",
        "AGENT_NAME": "Debug Agent",
        "AGENT_MACHINENAME": "debug-machine",
        "BUILD_SOURCESDIRECTORY": "${workspaceFolder}",
        "BUILD_REPOSITORY_LOCALPATH": "${workspaceFolder}",
        "BUILD_BUILDID": "1",
        "BUILD_BUILDNUMBER": "1",
        "BUILD_DEFINITIONNAME": "Debug Build",
        "BUILD_REPOSITORY_NAME": "repo",
        "BUILD_REPOSITORY_PROVIDER": "GitHub",
        "BUILD_SOURCEVERSION": "0000000000000000000000000000000000000000",
        "BUILD_SOURCEBRANCH": "refs/heads/main",
        "BUILD_SOURCEBRANCHNAME": "main",
        "SYSTEM_DEFAULTWORKINGDIRECTORY": "${workspaceFolder}",
        "SYSTEM_TEAMPROJECT": "DebugProject",
        "SYSTEM_COLLECTIONURI": "https://dev.azure.com/debug/",
        "SYSTEM_TEAMFOUNDATIONCOLLECTIONURI": "https://dev.azure.com/debug/",
        "NODE_ENV": "production",
        "NO_UPDATE_NOTIFIER": "true"
      },
      "console": "integratedTerminal"
    },
    {
      "type": "node",
      "request": "launch",
      "name": "Debug Azure Pipelines Task - Publish (PAT)",
      "program": "${workspaceFolder}/packages/azdo-task/src/main.ts",
      "preLaunchTask": "npm: build",
      "outFiles": ["${workspaceFolder}/packages/azdo-task/dist/**/*.js"],
      "sourceMaps": true,
      "cwd": "${workspaceFolder}",
      "env": {
        "INPUT_OPERATION": "publish",
        "INPUT_CONNECTIONTYPE": "connectedService:PAT",
        "INPUT_CONNECTIONNAMEPAT": "MarketplaceConnection",
        "INPUT_PUBLISHSOURCE": "manifest",
        "INPUT_ROOTFOLDER": "${workspaceFolder}/packages/core/src/__tests__/integration/fixtures/test-extension",
        "INPUT_PUBLISHERID": "your-publisher",
        "INPUT_EXTENSIONID": "your-extension",
        "INPUT_TFXVERSION": "embedded",
        "AGENT_TEMPDIRECTORY": "${workspaceFolder}/.tmp",
        "AGENT_TOOLSDIRECTORY": "${workspaceFolder}/.cache",
        "AGENT_WORKFOLDER": "${workspaceFolder}/.work",
        "AGENT_VERSION": "3.0.0",
        "AGENT_JOBSTATUS": "Succeeded",
        "AGENT_NAME": "Debug Agent",
        "AGENT_MACHINENAME": "debug-machine",
        "BUILD_SOURCESDIRECTORY": "${workspaceFolder}",
        "BUILD_REPOSITORY_LOCALPATH": "${workspaceFolder}",
        "BUILD_BUILDID": "1",
        "BUILD_BUILDNUMBER": "1",
        "BUILD_DEFINITIONNAME": "Debug Build",
        "BUILD_REPOSITORY_NAME": "repo",
        "BUILD_REPOSITORY_PROVIDER": "GitHub",
        "BUILD_SOURCEVERSION": "0000000000000000000000000000000000000000",
        "BUILD_SOURCEBRANCH": "refs/heads/main",
        "BUILD_SOURCEBRANCHNAME": "main",
        "SYSTEM_DEFAULTWORKINGDIRECTORY": "${workspaceFolder}",
        "SYSTEM_TEAMPROJECT": "DebugProject",
        "SYSTEM_COLLECTIONURI": "https://dev.azure.com/debug/",
        "SYSTEM_TEAMFOUNDATIONCOLLECTIONURI": "https://dev.azure.com/debug/",
        "ENDPOINT_URL_MarketplaceConnection": "https://marketplace.visualstudio.com",
        "ENDPOINT_AUTH_PARAMETER_MarketplaceConnection_APITOKEN": "${env:MARKETPLACE_TOKEN}",
        "ENDPOINT_AUTH_SCHEME_MarketplaceConnection": "Token",
        "NODE_ENV": "production",
        "NO_UPDATE_NOTIFIER": "true"
      },
      "console": "integratedTerminal"
    },
    {
      "type": "node",
      "request": "launch",
      "name": "Debug Azure Pipelines Task - Show",
      "program": "${workspaceFolder}/packages/azdo-task/src/main.ts",
      "preLaunchTask": "npm: build",
      "outFiles": ["${workspaceFolder}/packages/azdo-task/dist/**/*.js"],
      "sourceMaps": true,
      "cwd": "${workspaceFolder}",
      "env": {
        "INPUT_OPERATION": "show",
        "INPUT_CONNECTIONTYPE": "connectedService:PAT",
        "INPUT_CONNECTIONNAMEPAT": "MarketplaceConnection",
        "INPUT_PUBLISHERID": "your-publisher",
        "INPUT_EXTENSIONID": "your-extension",
        "INPUT_TFXVERSION": "embedded",
        "AGENT_TEMPDIRECTORY": "${workspaceFolder}/.tmp",
        "AGENT_TOOLSDIRECTORY": "${workspaceFolder}/.cache",
        "AGENT_WORKFOLDER": "${workspaceFolder}/.work",
        "AGENT_VERSION": "3.0.0",
        "AGENT_JOBSTATUS": "Succeeded",
        "AGENT_NAME": "Debug Agent",
        "AGENT_MACHINENAME": "debug-machine",
        "BUILD_SOURCESDIRECTORY": "${workspaceFolder}",
        "BUILD_REPOSITORY_LOCALPATH": "${workspaceFolder}",
        "BUILD_BUILDID": "1",
        "BUILD_BUILDNUMBER": "1",
        "BUILD_DEFINITIONNAME": "Debug Build",
        "BUILD_REPOSITORY_NAME": "repo",
        "BUILD_REPOSITORY_PROVIDER": "GitHub",
        "BUILD_SOURCEVERSION": "0000000000000000000000000000000000000000",
        "BUILD_SOURCEBRANCH": "refs/heads/main",
        "BUILD_SOURCEBRANCHNAME": "main",
        "SYSTEM_DEFAULTWORKINGDIRECTORY": "${workspaceFolder}",
        "SYSTEM_TEAMPROJECT": "DebugProject",
        "SYSTEM_COLLECTIONURI": "https://dev.azure.com/debug/",
        "SYSTEM_TEAMFOUNDATIONCOLLECTIONURI": "https://dev.azure.com/debug/",
        "ENDPOINT_URL_MarketplaceConnection": "https://marketplace.visualstudio.com",
        "ENDPOINT_AUTH_PARAMETER_MarketplaceConnection_APITOKEN": "${env:MARKETPLACE_TOKEN}",
        "ENDPOINT_AUTH_SCHEME_MarketplaceConnection": "Token",
        "NODE_ENV": "production",
        "NO_UPDATE_NOTIFIER": "true"
      },
      "console": "integratedTerminal"
    },
    {
      "type": "node",
      "request": "launch",
      "name": "Debug Tests",
      "program": "${workspaceFolder}/node_modules/.bin/jest",
      "args": ["--runInBand", "--no-coverage", "--testNamePattern", "${input:testNamePattern}"],
      "console": "integratedTerminal",
      "internalConsoleOptions": "neverOpen",
      "disableOptimisticBPs": true,
      "env": {
        "NODE_OPTIONS": "--experimental-vm-modules"
      }
    }
  ],
  "inputs": [
    {
      "id": "testNamePattern",
      "type": "promptString",
      "description": "Test name pattern (optional)",
      "default": ""
    }
  ]
}
