# Schema for action-example-checker
# See: https://github.com/jessehouwing/actions-example-checker

# Define reusable custom types
types:
  url:
    type: string
    match: '^https?://.*'
  semver:
    type: string
    match: '^\d+\.\d+\.\d+$'
  identifier:
    type: string
    match: '^[a-zA-Z0-9._-]+$'
  publish-mode:
    type: choice
    options:
      - manifest
      - vsix

# Validate inputs
inputs:
  operation:
    type: choice
    options:
      - package
      - publish
      - unpublish
      - share
      - unshare
      - install
      - show
      - query-version
      - wait-for-validation
      - wait-for-installation

  auth-type:
    type: choice
    options:
      - pat
      - basic
      - oidc

  token:
    type: string

  username:
    type: string

  service-url:
    type: url

  tfx-version:
    type: string

  publisher-id:
    type: identifier

  extension-id:
    type: identifier

  manifest-file:
    type: string
    separators: newline
    items:
      type: string

  manifest-file-js:
    type: string

  overrides-file:
    type: string

  vsix-file:
    type: string

  use:
    type: publish-mode

  extension-version:
    type: semver

  extension-name:
    type: string

  extension-visibility:
    type: choice
    options:
      - private
      - public
      - private_preview
      - public_preview

  localization-root:
    type: string

  extension-pricing:
    type: choice
    options:
      - default
      - free
      - paid

  output-path:
    type: string

  bypass-validation:
    type: boolean

  update-tasks-version:
    type: choice
    options:
      - none
      - major
      - minor
      - patch

  update-tasks-id:
    type: boolean

  accounts:
    type: string
    separators: newline
    items:
      type: string

  vsix-path:
    type: string

  no-wait-validation:
    type: boolean

  expected-tasks:
    type: string
    separators: newline
    items:
      type: string

  version-action:
    type: choice
    options:
      - None
      - Major
      - Minor
      - Patch

  extension-version-override:
    type: string

  max-retries:
    type: number

  min-timeout:
    type: number

  max-timeout:
    type: number

  timeout-minutes:
    type: number

  polling-interval-seconds:
    type: number

# Validate outputs
outputs:
  vsix-path:
    type: string

  metadata:
    type: string

  current-version:
    type: semver

  proposed-version:
    type: semver
